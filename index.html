<!DOCTYPE html>
<html lang="en-US">

<!-- Myles Barrett's Frog Game
	 Created June 23, 2023 -->

<head>
	<title>Cross the River</title>
	
	<style>
	</style>
</head>

<body>
	<img id="defaultImg" width="1000" src="startscreen.png" alt="1"/>
	<p id="p1">To start the game type play</p>
	<input type="text" id="myText" value="Type something...">
	<button id="button" onclick="sendText()">Enter</button>

	<script>
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		//The following is a dictionary that lists the states and their information
		
		var scene_dictionary=
		{ 
			"state_startscreen":
			{ 
				"png":"startscreen.png",
				"phrase":"To start the game type play",
				"actions":
				{
					"play":"state_by_river"
				},
			},
			
			"state_by_river":
			{
				"png":"scene1.png",
				"phrase":"You're a frog",
				"actions":
				{
					"move_rock":"state_by_river_no_rock",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_rock":
			{
				"png":"scene2.png",
				"phrase":"You moved the rock",
				"actions":
				{
					"swim":"state_drowning_no_rock"
				},
			},
			
			"state_drowning":
			{
				"png":"scene3.png",
				"phrase":"You drowned. Type restart to try again.",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
			
			"state_drowning_no_rock":
			{
				"png":"scene4.png",
				"phrase":"You drowned. Type restart to try again.",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
		};
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		
		//Object that keeps track of the state
		const state = 
		{
			curr_state:"state_startscreen"
		};
		
		//This block of code lets the player use the enter key instead of needing to press the button
		var input = document.getElementById("myText");
		input.addEventListener("keypress", function(event)
		{
			if(event.key === "Enter")
			{
				event.preventDefault();
				document.getElementById("button").click();
			}
		});
		
		//Method called when button is pressed.
		function sendText()
		{
			var text = document.getElementById("myText").value;
			var current_state = state.curr_state;
			
			if(current_state in scene_dictionary)
			{
				if(text in scene_dictionary[current_state][actions])
				{
					document.getElementById('defaultImg').src=scene_dictionary[current_state][png];
					document.getElementById("p1").innerHTML = scene_dictionary[current_state][phrase];
					state.curr_state = scene_dictionary[current_state][actions][text];
				}
				else
					document.getElementById("p1").innerHTML = "I don't know what this means.";
			}
			
			else
				document.getElementById("p1").innerHTML = "Scene not found error";
		};
	</script>
	
</body>
</html>
