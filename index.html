<!DOCTYPE html>
<html lang="en-US">

<!-- Myles Barrett's Frog Game
	 Created June 23, 2023 -->

<head>
	<title>Frog Game</title>
	
	<style>
	</style>
</head>

<body>
	<p> Timer: <span id="timer">0</span></p>
	<img id="defaultImg" width="1000" src="startscreen.png" alt="1"/>
	<p id="p1">To start the game type play</p>
	<input type="text" id="myText" value="Type something...">
	<button id="button" onclick="sendText()">Enter</button>

	<script>
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		//The following is a dictionary of dictionaries that lists the states and their information
		
		var scene_dictionary=
		{ 
			"state_startscreen":
			{ 
				"png":"startscreen.png",
				"phrase":"To start the game type play",
				"actions":
				{
					"play":"state_by_river"
				},
			},
			
			"state_by_river":
			{
				"png":"scene1.png",
				"phrase":"You're a frog",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod",
					"grab rod":"state_by_river_no_fishing_rod",
					"grab stick":"state_by_river_no_fishing_rod",
					"get stick":"state_by_river_no_fishing_rod",
					"get fishing rod":"state_by_river_no_fishing_rod",
					"get rod":"state_by_river_no_fishing_rod",
					"get pole":"state_by_river_no_fishing_rod",
					"grab pole":"state_by_river_no_fishing_rod",
					"get fishing pole":"state_by_river_no_fishing_rod",
					"move rock":"state_by_river_no_rock",
					"push rock":"state_by_river_no_rock",
					"move the rock":"state_by_river_no_rock",
					"push the rock":"state_by_river_no_rock",
					"pick up rock":"state_by_river_no_rock",
					"break rock":"state_by_river_no_rock",
					"move boulder":"state_by_river_no_rock",
					"push boulder":"state_by_river_no_rock",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_no_rock":
			{
				"png":"scene2.png",
				"phrase":"You moved the rock",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod_no_rock",
					"grab rod":"state_by_river_no_fishing_rod_no_rock",
					"grab stick":"state_by_river_no_fishing_rod_no_rock",
					"get stick":"state_by_river_no_fishing_rod_no_rock",
					"get fishing rod":"state_by_river_no_fishing_rod_no_rock",
					"get rod":"state_by_river_no_fishing_rod_no_rock",
					"get pole":"state_by_river_no_fishing_rod_no_rock",
					"grab pole":"state_by_river_no_fishing_rod_no_rock",
					"get fishing pole":"state_by_river_no_fishing_rod_no_rock",
					"grab worm":"state_by_river_no_worm",
					"get worm":"state_by_river_no_worm",
					"grab worms":"state_by_river_no_worm",
					"get worms":"state_by_river_no_worm",
					"pick up worms":"state_by_river_no_worm",
					"pick up worm":"state_by_river_no_worm",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_no_worm":
			{
				"png":"scene3.png",
				"phrase":"You got the worm",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod_no_worm",
					"grab rod":"state_by_river_no_fishing_rod_no_worm",
					"grab stick":"state_by_river_no_fishing_rod_no_worm",
					"get stick":"state_by_river_no_fishing_rod_no_worm",
					"get fishing rod":"state_by_river_no_fishing_rod_no_worm",
					"get rod":"state_by_river_no_fishing_rod_no_worm",
					"get pole":"state_by_river_no_fishing_rod_no_worm",
					"grab pole":"state_by_river_no_fishing_rod_no_worm",
					"get fishing pole":"state_by_river_no_fishing_rod_no_worm",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod":
			{
				"png":"scene4.png",
				"phrase":"You got the fishing rod",
				"actions":
				{
					"move rock":"state_by_river_no_fishing_rod_no_rock",
					"push rock":"state_by_river_no_fishing_rod_no_rock",
					"move the rock":"state_by_river_no_fishing_rod_no_rock",
					"push the rock":"state_by_river_no_fishing_rod_no_rock",
					"pick up rock":"state_by_river_no_fishing_rod_no_rock",
					"break rock":"state_by_river_no_fishing_rod_no_rock",
					"move boulder":"state_by_river_no_fishing_rod_no_rock",
					"push boulder":"state_by_river_no_fishing_rod_no_rock",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod_no_rock":
			{
				"png":"scene5.png",
				"phrase":"You got the fishing rod and you moved the rock.",
				"actions":
				{
					"grab worm":"state_by_river_no_fishing_rod_no_worm",
					"get worm":"state_by_river_no_fishing_rod_no_worm",
					"grab worms":"state_by_river_no_fishing_rod_no_worm",
					"get worms":"state_by_river_no_fishing_rod_no_worm",
					"pick up worms":"state_by_river_no_fishing_rod_no_worm",
					"pick up worm":"state_by_river_no_fishing_rod_no_worm",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod_no_worm":
			{
				"png":"scene6.png",
				"phrase":"You got the fishing rod and the worm",
				"actions":
				{
					"go fishing":"state_by_river_mitt",
					"use the fishing rod":"state_by_river_mitt",
					"fish":"state_by_river_mitt",
					"use the rod":"state_by_river_mitt",
					"use the pole":"state_by_river_mitt",
					"use the fishing pole":"state_by_river_mitt",
					"start fishing":"state_by_river_mitt",
					"go fish":"state_by_river_mitt",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_mitt":
			{
				"png":"scene7.png",
				"phrase":"You fished up an oven mitt",
				"actions":
				{
					"give scorpion oven mitt":"state_by_river_friend",
					"give the scorpion oven mitt":"state_by_river_friend",
					"give the scorpion the oven mitt":"state_by_river_friend",
					"give scorpion the oven mitt":"state_by_river_friend",
					"give scorpion mitt":"state_by_river_friend",
					"give scorpion the mitt":"state_by_river_friend",
					"give the scorpion the mitt":"state_by_river_friend",
					"give mitt":"state_by_river_friend",
					"give oven mitt":"state_by_river_friend",
					"swim":"state_drowning",
					"go swimming":"state_drowning",
					"swim across":"state_drowning",
					"swim across river":"state_drowning",
					"swim to the other side":"state_drowning",
					"swim in the river":"state_drowning"
				},
			},
			
			"state_by_river_friend":
			{
				"png":"scene8.png",
				"phrase":"The scorpion thanks you for this fashionable new gift.",
				"actions":
				{
					"swim":"state_win",
					"go swimming":"state_win",
					"swim across":"state_win",
					"swim across river":"state_win",
					"swim to the other side":"state_win",
					"swim in the river":"state_win"
				},
			},
			
			"state_drowning":
			{
				"png":"scene9.png",
				"phrase":"You try to swim across the river. ''Sorry it's in my nature.'' The scorpion pokes you and you both drown. Type restart to try again.",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
			
			"state_win":
			{
				"png":"winscreen.png",
				"phrase":"You won the game!!!",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
			

		};
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		//timer code from this --> https://codepen.io/awkay/pen/ExzGea
		
		var timer; 
		var timeLeft = 60; // seconds

		// What to do when the timer runs out
		function gameOver() 
		{
			// This cancels the setInterval, so the updateTimer stops getting called
			cancelInterval(timer);
		}

		function updateTimer() 
		{
			timeLeft = timeLeft - 1;
			
			if(timeLeft >= 0)
				document.getElementById("timer").innerHTML = timeLeft;
			
			else 
			{
				gameOver();
			}
		}

		// The button has an on-click event handler that calls this
		function start() 
		{
			// setInterval is a built-in function that will call the given function
			// every N milliseconds (1 second = 1000 ms)
			timer = setInterval(updateTimer, 1000);
  
			// It will be a whole second before the time changes, so we'll call the update
			// once ourselves
			updateTimer();
		}
//------------------------------------------------------------------------------------------------------------
		
		//Variable that keeps track of the current state
		var state = "state_startscreen";
		
		//This block of code lets the player use the enter key instead of needing to press the button
		var input = document.getElementById("myText");
		input.addEventListener("keypress", function(event)
		{
			if(event.key === "Enter")
			{
				event.preventDefault();
				document.getElementById("button").click();
			}
		});
		
		//Method called when button is pressed.
		function sendText()
		{
			var text = document.getElementById("myText").value.toLowerCase();
			
			if(state in scene_dictionary)
			{
				if(text in scene_dictionary[state]["actions"])
				{
					if(text == "play" && state == "state_startscreen")
						start();
					
					state = scene_dictionary[state]["actions"][text];
					document.getElementById('defaultImg').src=scene_dictionary[state]["png"];
					document.getElementById("p1").innerHTML = scene_dictionary[state]["phrase"];
				}
				
				else
					document.getElementById("p1").innerHTML = "I don't know what this means.";
			}
			
			else
				document.getElementById("p1").innerHTML = "Scene not found error";
		};
	</script>
	
</body>
</html>
