<!DOCTYPE html>
<html lang="en-US">

<!-- Myles Barrett's Frog Game
	 Created June 23, 2023 -->

<head>
	<title>Cross the River</title>
	
	<style>
	</style>
</head>

<body>
	<img id="defaultImg" width="1000" src="startscreen.png" alt="1"/>
	<p id="p1">To start the game type play</p>
	<input type="text" id="myText" value="Type something...">
	<button id="button" onclick="sendText()">Enter</button>

	<script>
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		//The following is a dictionary of dictionaries that lists the states and their information
		
		var scene_dictionary=
		{ 
			"state_startscreen":
			{ 
				"png":"startscreen.png",
				"phrase":"To start the game type play",
				"actions":
				{
					"play":"state_by_river"
				},
			},
			
			"state_by_river":
			{
				"png":"scene1.png",
				"phrase":"You're a frog",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod",
					"move rock":"state_by_river_no_rock",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_rock":
			{
				"png":"scene2.png",
				"phrase":"You moved the rock",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod_no_rock",
					"grab worm":"state_by_river_no_worm",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_worm":
			{
				"png":"scene3.png",
				"phrase":"You got the worm",
				"actions":
				{
					"grab fishing rod":"state_by_river_no_fishing_rod_no_worm",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod":
			{
				"png":"scene4.png",
				"phrase":"You got the fishing rod",
				"actions":
				{
					"move rock":"state_by_river_no_fishing_rod_no_rock",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod_no_rock":
			{
				"png":"scene5.png",
				"phrase":"You got the fishing rod and you moved the rock.",
				"actions":
				{
					"grab worm":"state_by_river_no_fishing_rod_no_worm",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_no_fishing_rod_no_worm":
			{
				"png":"scene6.png",
				"phrase":"You got the fishing rod and the worm",
				"actions":
				{
					"go fishing":"state_by_river_mitt",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_mitt":
			{
				"png":"scene7.png",
				"phrase":"You fished up an oven mitt",
				"actions":
				{
					"give scorpion oven mitt":"state_by_river_friend",
					"swim":"state_drowning"
				},
			},
			
			"state_by_river_friend":
			{
				"png":"scene8.png",
				"phrase":"The scorpion thanks you for this fashionable new gift.",
				"actions":
				{
					"swim":"state_win"
				},
			},
			
			"state_drowning":
			{
				"png":"scene9.png",
				"phrase":"You try to swim across the river. ''Sorry it's in my nature.'' The scorpion pokes you and you both drown. Type restart to try again.",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
			
			"state_win":
			{
				"png":"winscreen.png",
				"phrase":"You won the game!!!",
				"actions":
				{
					"restart":"state_startscreen"
				},
			},
			

		};
		//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
		
		//Variable that keeps track of the current state
		var state = "state_startscreen";
		
		//This block of code lets the player use the enter key instead of needing to press the button
		var input = document.getElementById("myText");
		input.addEventListener("keypress", function(event)
		{
			if(event.key === "Enter")
			{
				event.preventDefault();
				document.getElementById("button").click();
			}
		});
		
		//Method called when button is pressed.
		function sendText()
		{
			var text = document.getElementById("myText").value;
			
			if(state in scene_dictionary)
			{
				if(text in scene_dictionary[state]["actions"])
				{
					state = scene_dictionary[state]["actions"][text];
					document.getElementById('defaultImg').src=scene_dictionary[state]["png"];
					document.getElementById("p1").innerHTML = scene_dictionary[state]["phrase"];
				}
				
				else
					document.getElementById("p1").innerHTML = "I don't know what this means.";
			}
			
			else
				document.getElementById("p1").innerHTML = "Scene not found error";
		};
	</script>
	
</body>
</html>
